{% extends "base.html" %}

{% block title %}Bulk Purchasing Portal - List Your Needs{% endblock %}

{% block content %}
<div class="container mt-5 pt-5">
    <!-- Header Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-10">
            <div class="text-center mb-4">
                <div class="mb-3">
                    <span class="badge bg-primary px-4 py-2 rounded-pill shadow" style="font-size: 1rem;">
                        <i class="fas fa-warehouse me-2"></i>For Buyers & Facility Managers
                    </span>
                </div>
                <h1 class="display-4 fw-bold mb-3">Bulk Purchasing Portal</h1>
                <p class="lead text-muted">Need cleaning supplies or janitorial products in bulk? Connect with verified suppliers instantly.</p>
            </div>
            
            <!-- Value Proposition Cards -->
            <div class="row g-4 mb-5">
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100 text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-handshake fa-3x text-primary"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Pre-Vetted Suppliers</h5>
                        <p class="text-muted small mb-0">Access a network of reliable cleaning supply vendors with verified track records</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100 text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-dollar-sign fa-3x text-success"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Competitive Pricing</h5>
                        <p class="text-muted small mb-0">Post your needs once and receive multiple quotes from competing suppliers</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100 text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-shipping-fast fa-3x text-info"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Fast Fulfillment</h5>
                        <p class="text-muted small mb-0">Mark urgent needs and get responses within 24 hours from available suppliers</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- How It Works Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-10">
            <div class="card shadow-lg border-0">
                <div class="card-body p-5">
                    <h3 class="fw-bold mb-4 text-center">
                        <i class="fas fa-info-circle text-primary me-2"></i>How It Works
                    </h3>
                    <div class="row g-4">
                        <div class="col-md-3 text-center">
                            <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                <span class="fs-4 fw-bold">1</span>
                            </div>
                            <h6 class="fw-bold mb-2">Post Your Needs</h6>
                            <p class="text-muted small">List what products you need, quantities, and delivery requirements</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                <span class="fs-4 fw-bold">2</span>
                            </div>
                            <h6 class="fw-bold mb-2">Receive Quotes</h6>
                            <p class="text-muted small">Suppliers review your request and submit competitive quotes</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                <span class="fs-4 fw-bold">3</span>
                            </div>
                            <h6 class="fw-bold mb-2">Compare & Select</h6>
                            <p class="text-muted small">Review proposals and choose the supplier that meets your needs</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="rounded-circle bg-success text-white d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                <span class="fs-4 fw-bold">4</span>
                            </div>
                            <h6 class="fw-bold mb-2">Get Delivered</h6>
                            <p class="text-muted small">Finalize your order and receive your products on schedule</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Request Form Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <div class="card shadow-lg border-0">
                <div class="card-header bg-primary text-white py-4">
                    <h4 class="mb-0 text-center">
                        <i class="fas fa-clipboard-list me-2"></i>Submit Your Bulk Purchase Request
                    </h4>
                </div>
                <div class="card-body p-5">
                    {% if not session.get('user_email') %}
                    <div class="alert alert-warning mb-4">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Sign in required:</strong> Please <a href="{{ url_for('auth') }}" class="alert-link">register or sign in</a> to submit a bulk purchase request.
                    </div>
                    {% endif %}
                    
                    <form method="POST" action="{{ url_for('submit_bulk_request') }}" {% if not session.get('user_email') %}class="opacity-50 pe-none"{% endif %}>
                        <!-- Company Information -->
                        <div class="mb-4">
                            <h5 class="fw-bold mb-3">Company Information</h5>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="company_name" class="form-label">Company Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="company_name" name="company_name" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="contact_name" class="form-label">Contact Person <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="contact_name" name="contact_name" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="email" class="form-label">Email Address <span class="text-danger">*</span></label>
                                    <input type="email" class="form-control" id="email" name="email" value="{{ session.get('user_email', '') }}" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="phone" class="form-label">Phone Number <span class="text-danger">*</span></label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Product Details -->
                        <div class="mb-4">
                            <h5 class="fw-bold mb-3">Product Requirements</h5>
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="product_category" class="form-label">Product Category <span class="text-danger">*</span></label>
                                    <select class="form-select" id="product_category" name="product_category" required>
                                        <option value="">Select a category...</option>
                                        <option value="Janitorial Supplies">Janitorial Supplies</option>
                                        <option value="Cleaning Chemicals">Cleaning Chemicals</option>
                                        <option value="Floor Care Products">Floor Care Products</option>
                                        <option value="Paper Products">Paper Products (Towels, Toilet Paper, etc.)</option>
                                        <option value="Trash Bags">Trash Bags & Liners</option>
                                        <option value="Personal Protective Equipment">Personal Protective Equipment (PPE)</option>
                                        <option value="Equipment">Equipment & Machinery</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <label for="product_description" class="form-label">Detailed Product Description <span class="text-danger">*</span></label>
                                    <textarea class="form-control" id="product_description" name="product_description" rows="4" 
                                              placeholder="List the specific products you need, brands (if any), sizes, specifications, etc." required></textarea>
                                </div>
                                <div class="col-md-6">
                                    <label for="quantity" class="form-label">Estimated Quantity <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="quantity" name="quantity" 
                                           placeholder="e.g., 100 cases, 500 units" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="budget" class="form-label">Budget Range (Optional)</label>
                                    <input type="text" class="form-control" id="budget" name="budget" 
                                           placeholder="e.g., $1,000-$2,000">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Delivery Requirements -->
                        <div class="mb-4">
                            <h5 class="fw-bold mb-3">Delivery & Timeline</h5>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="delivery_location" class="form-label">Delivery Location <span class="text-danger">*</span></label>
                                    <select class="form-select" id="delivery_location" name="delivery_location" required>
                                        <option value="">Select city...</option>
                                        <option value="Hampton">Hampton, VA</option>
                                        <option value="Newport News">Newport News, VA</option>
                                        <option value="Norfolk">Norfolk, VA</option>
                                        <option value="Virginia Beach">Virginia Beach, VA</option>
                                        <option value="Suffolk">Suffolk, VA</option>
                                        <option value="Chesapeake">Chesapeake, VA</option>
                                        <option value="Portsmouth">Portsmouth, VA</option>
                                        <option value="Williamsburg">Williamsburg, VA</option>
                                        <option value="Other VA">Other Virginia Location</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="needed_by" class="form-label">Needed By Date <span class="text-danger">*</span></label>
                                    <input type="date" class="form-control" id="needed_by" name="needed_by" required>
                                </div>
                                <div class="col-12">
                                    <label for="urgency" class="form-label">Urgency Level <span class="text-danger">*</span></label>
                                    <select class="form-select" id="urgency" name="urgency" required>
                                        <option value="standard">Standard (2-4 weeks)</option>
                                        <option value="urgent">Urgent (1-2 weeks)</option>
                                        <option value="emergency">Emergency (Within 1 week)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Additional Notes -->
                        <div class="mb-4">
                            <label for="additional_notes" class="form-label">Additional Requirements or Notes</label>
                            <textarea class="form-control" id="additional_notes" name="additional_notes" rows="3" 
                                      placeholder="Any special delivery instructions, recurring order needs, payment terms, etc."></textarea>
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary btn-lg px-5 py-3 rounded-pill" {% if not session.get('user_email') %}disabled{% endif %}>
                                <i class="fas fa-paper-plane me-2"></i>Submit Purchase Request
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- For Suppliers CTA -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-10">
            <div class="card border-0 shadow-lg" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div class="card-body p-5 text-white text-center">
                    <h3 class="fw-bold mb-3">Are You a Supplier?</h3>
                    <p class="lead mb-4">Join our network and get access to bulk purchase requests from facilities across Virginia</p>
                    <a href="{{ url_for('bulk_products') }}" class="btn btn-light btn-lg px-5 py-3 rounded-pill">
                        <i class="fas fa-store me-2"></i>View Supplier Dashboard
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- FAQ Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-10">
            <h3 class="fw-bold mb-4 text-center">Frequently Asked Questions</h3>
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq1">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                            Is there a fee to post a bulk purchase request?
                        </button>
                    </h2>
                    <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Posting bulk purchase requests is completely free for buyers. Suppliers pay a small subscription fee to access and respond to requests.
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq2">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                            How quickly will I receive quotes?
                        </button>
                    </h2>
                    <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Standard requests typically receive quotes within 2-3 business days. Urgent requests are prioritized and usually get responses within 24-48 hours.
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq3">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
                            Are suppliers vetted?
                        </button>
                    </h2>
                    <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Yes! All suppliers in our network are verified businesses with proper licensing and insurance. We review their credentials before granting access to the platform.
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq4">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4">
                            Can I set up recurring orders?
                        </button>
                    </h2>
                    <div id="collapse4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Absolutely! Mention your recurring needs in the "Additional Requirements" section, and suppliers can include recurring order options in their quotes.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.2) !important;
}

.accordion-button:not(.collapsed) {
    background-color: #f8f9fa;
    color: #495057;
}
</style>
{% endblock %}
