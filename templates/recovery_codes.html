{% extends 'base.html' %}
{% block title %}2FA Recovery Codes{% endblock %}
{% block content %}
<div class="container py-4" style="max-width: 860px;">
  <h2 class="mb-3">üîê 2FA Recovery Codes</h2>
  <p class="text-secondary">Use these one-time recovery codes if you lose access to your authenticator app. Each code can be used <strong>once</strong>. Store them offline (password manager or secure file). Generating a new set invalidates all previous unused codes.</p>
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      {% if new_codes %}
      <h5 class="card-title">Your New Recovery Codes</h5>
      <div class="row row-cols-2 row-cols-md-5 g-2 mt-2 mb-3">
        {% for c in new_codes %}
        <div class="col">
          <div class="border rounded p-2 text-center bg-light fw-semibold" style="font-family: monospace; letter-spacing:1px;">{{ c }}</div>
        </div>
        {% endfor %}
      </div>
      <div class="alert alert-warning small mb-0"><i class="fas fa-exclamation-triangle me-2"></i>This is the <strong>only time</strong> these codes will be shown. Save them now.</div>
      {% else %}
      <p class="mb-0">No new codes to display. Generate a new set below.</p>
      {% endif %}
    </div>
  </div>
  <form method="post" action="{{ url_for('generate_new_recovery_codes') }}" class="mb-3" onsubmit="return confirm('Generate a new set of recovery codes? All unused previous codes will be invalidated.');">
    <button class="btn btn-primary"><i class="fas fa-sync-alt me-2"></i>Generate New Codes</button>
    <a href="{{ url_for('customer_dashboard') }}" class="btn btn-outline-secondary ms-2">Back</a>
  </form>
</div>
{% endblock %}
