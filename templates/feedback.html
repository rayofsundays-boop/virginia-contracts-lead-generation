{% extends "base.html" %}

{% block title %}Feedback - ContractLink.ai{% endblock %}

{% block content %}
<div class="container mt-5 mb-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <!-- Header -->
            <div class="text-center mb-4">
                <h1 class="display-5 fw-bold mb-3">
                    <i class="fas fa-comment-dots text-primary me-2"></i>
                    Send Us Your Feedback
                </h1>
                <p class="lead text-secondary">
                    We value your input! Help us improve ContractLink.ai by sharing your thoughts, suggestions, or reporting issues.
                </p>
            </div>

            <!-- Feedback Form Card -->
            <div class="card shadow-lg border-0">
                <div class="card-body p-4 p-md-5">
                    <form method="POST" id="feedbackForm">
                        <!-- Category Selection -->
                        <div class="mb-4">
                            <label for="category" class="form-label fw-semibold">
                                <i class="fas fa-tag text-primary me-2"></i>Feedback Category
                            </label>
                            <select class="form-select form-select-lg" id="category" name="category" required>
                                <option value="General">General Feedback</option>
                                <option value="Bug Report">Bug Report</option>
                                <option value="Feature Request">Feature Request</option>
                                <option value="User Experience">User Experience</option>
                                <option value="Data Quality">Data Quality</option>
                                <option value="Performance">Performance Issue</option>
                                <option value="Documentation">Documentation</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <!-- Rating (Optional) -->
                        <div class="mb-4">
                            <label class="form-label fw-semibold">
                                <i class="fas fa-star text-warning me-2"></i>Overall Experience (Optional)
                            </label>
                            <div class="btn-group w-100" role="group" aria-label="Rating">
                                <input type="radio" class="btn-check" name="rating" id="rating1" value="1">
                                <label class="btn btn-outline-danger" for="rating1">
                                    <i class="fas fa-frown"></i> Poor
                                </label>

                                <input type="radio" class="btn-check" name="rating" id="rating2" value="2">
                                <label class="btn btn-outline-warning" for="rating2">
                                    <i class="fas fa-meh"></i> Fair
                                </label>

                                <input type="radio" class="btn-check" name="rating" id="rating3" value="3">
                                <label class="btn btn-outline-info" for="rating3">
                                    <i class="fas fa-smile"></i> Good
                                </label>

                                <input type="radio" class="btn-check" name="rating" id="rating4" value="4">
                                <label class="btn btn-outline-primary" for="rating4">
                                    <i class="fas fa-grin"></i> Great
                                </label>

                                <input type="radio" class="btn-check" name="rating" id="rating5" value="5">
                                <label class="btn btn-outline-success" for="rating5">
                                    <i class="fas fa-grin-stars"></i> Excellent
                                </label>
                            </div>
                        </div>

                        <!-- Subject -->
                        <div class="mb-4">
                            <label for="subject" class="form-label fw-semibold">
                                <i class="fas fa-heading text-primary me-2"></i>Subject
                            </label>
                            <input type="text" 
                                   class="form-control form-control-lg" 
                                   id="subject" 
                                   name="subject" 
                                   placeholder="Brief summary of your feedback"
                                   maxlength="200">
                            <small class="text-muted">Optional - helps us categorize your feedback</small>
                        </div>

                        <!-- Message -->
                        <div class="mb-4">
                            <label for="message" class="form-label fw-semibold">
                                <i class="fas fa-comment-alt text-primary me-2"></i>Your Feedback <span class="text-danger">*</span>
                            </label>
                            <textarea class="form-control form-control-lg" 
                                      id="message" 
                                      name="message" 
                                      rows="8" 
                                      placeholder="Tell us what's on your mind... Be as detailed as you'd like!"
                                      required></textarea>
                            <small class="text-muted">
                                <i class="fas fa-info-circle me-1"></i>
                                Please provide as much detail as possible to help us understand and address your feedback.
                            </small>
                        </div>

                        <!-- User Info Display (if logged in) -->
                        {% if session.get('user_id') %}
                        <div class="alert alert-info mb-4">
                            <i class="fas fa-user-circle me-2"></i>
                            <strong>Sending as:</strong> {{ session.get('username', 'User') }} 
                            <small class="text-muted">({{ session.get('email', session.get('user_email', '')) }})</small>
                        </div>
                        {% endif %}

                        <!-- Submit Button -->
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-paper-plane me-2"></i>Send Feedback
                            </button>
                        </div>

                        <!-- Additional Info -->
                        <div class="text-center mt-4">
                            <small class="text-muted">
                                <i class="fas fa-shield-alt me-1"></i>
                                Your feedback is confidential and helps us improve our service.
                            </small>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Why Feedback Matters Section -->
            <div class="row mt-5">
                <div class="col-md-4 text-center mb-3">
                    <div class="feature-box p-3">
                        <i class="fas fa-lightbulb fa-3x text-warning mb-3"></i>
                        <h5>Shape Our Roadmap</h5>
                        <p class="text-muted small">Your ideas directly influence new features and improvements.</p>
                    </div>
                </div>
                <div class="col-md-4 text-center mb-3">
                    <div class="feature-box p-3">
                        <i class="fas fa-bug fa-3x text-danger mb-3"></i>
                        <h5>Report Issues</h5>
                        <p class="text-muted small">Help us identify and fix problems quickly.</p>
                    </div>
                </div>
                <div class="col-md-4 text-center mb-3">
                    <div class="feature-box p-3">
                        <i class="fas fa-handshake fa-3x text-success mb-3"></i>
                        <h5>Build Together</h5>
                        <p class="text-muted small">Join us in creating the best lead generation platform.</p>
                    </div>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="text-center mt-4">
                <p class="text-muted mb-2">Looking for something else?</p>
                <a href="{{ url_for('contact') }}" class="btn btn-outline-secondary me-2">
                    <i class="fas fa-envelope me-1"></i>Contact Support
                </a>
                {% if session.get('user_id') %}
                <a href="{{ url_for('client_dashboard') }}" class="btn btn-outline-primary">
                    <i class="fas fa-tachometer-alt me-1"></i>Back to Dashboard
                </a>
                {% else %}
                <a href="{{ url_for('home') }}" class="btn btn-outline-primary">
                    <i class="fas fa-home me-1"></i>Back to Home
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Custom Styles -->
<style>
    .feature-box {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .feature-box:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .btn-check:checked + label {
        transform: scale(1.05);
    }

    #feedbackForm textarea:focus,
    #feedbackForm input:focus,
    #feedbackForm select:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
    }

    .card {
        border-radius: 15px;
    }
</style>

<!-- Character Counter Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const messageTextarea = document.getElementById('message');
    const form = document.getElementById('feedbackForm');
    
    // Add character counter
    const counter = document.createElement('small');
    counter.className = 'text-muted float-end';
    counter.id = 'charCounter';
    messageTextarea.parentElement.querySelector('small').after(counter);
    
    function updateCounter() {
        const count = messageTextarea.value.length;
        counter.textContent = `${count} characters`;
    }
    
    messageTextarea.addEventListener('input', updateCounter);
    updateCounter();
    
    // Form validation feedback
    form.addEventListener('submit', function(e) {
        if (!messageTextarea.value.trim()) {
            e.preventDefault();
            messageTextarea.classList.add('is-invalid');
            alert('Please provide your feedback message.');
        }
    });
});
</script>
{% endblock %}
